<!DOCTYPE html>
<html>
<head>

<meta charset="utf-8">
<link rel="stylesheet" href="style.css">

<title>
Jamie Bali
</title>
</head>
<body>
<canvas id="background"></canvas>
<canvas id="animate"></canvas>
<canvas id="gradient"></canvas>
<div id="nametext">
    <b>Jamie Bali</b>
    <div id="button">

    </div>
</div>



</body>
<script>

window.addEventListener("load", draw);
window.addEventListener("resize", draw);

var style = chooseStyle();

var locOffset = window.innerWidth;

function draw(){
    // fill background
    var h = window.innerHeight;
    var w = window.innerWidth;
    var c = document.getElementById("background");
    c.height = h;
    c.width = w;
    var ctx = c.getContext("2d");
    ctx.fillStyle = '#181818';
    ctx.fillRect(0, 0, w, h);

    // lines
    if (style == "isometric"){

        var offset = 0;
        var hexLineLength = 75;
        var hexWidth = hexLineLength * 1.732
        var heightOffset = hexLineLength * 0.433

        var arbitraryXOffset = Math.floor(Math.random() * hexWidth) * -1;
        var arbitraryYOffset = Math.floor(Math.random() * hexLineLength) * -1;
        
        ctx.beginPath();

        ctx.translate(w/2,h/2);  
        ctx.rotate(((Math.random() * 0.06) - 0.03 ) * Math.PI);
        ctx.translate(-w/2,-h/2);

        for (var y = arbitraryYOffset; y < h + (2*hexLineLength); y+=hexLineLength + heightOffset){
            for (var x = arbitraryXOffset; x < w + (2*hexLineLength); x+=hexWidth){
                ctx.moveTo(x+offset,y);
                ctx.lineTo(x+offset,y+hexLineLength);
            }

            if (offset == 0){

                var alternator = 0;
                //alternate up
                ctx.moveTo(arbitraryXOffset,y);
                for (var x = arbitraryXOffset; x < w + (2*hexWidth); x += (hexWidth / 2)){
                    ctx.lineTo(x,y-alternator);
                    if (alternator == heightOffset){
                        alternator = 0;
                    }
                    else {alternator = heightOffset;}
                }

                //alternate down
                var alternator = 0;
                ctx.moveTo(arbitraryXOffset,y + hexLineLength);
                for (var x = arbitraryXOffset; x < w + (2*hexWidth); x += (hexWidth / 2)){
                    ctx.lineTo(x,y+alternator+hexLineLength);
                    if (alternator == heightOffset){
                        alternator = 0;
                    }
                    else {alternator = heightOffset;}
                }
                offset = hexWidth / 2;
            }
            else{
                offset = 0;
            }
        }


    }

    ctx.strokeStyle ='#ffffe6';
    ctx.lineWidth = 7.6;
    ctx.shadowBlur = 25;
    ctx.shadowColor = '#ffffe6';
    ctx.stroke();
    myMove();
}

function chooseStyle() {
    var arr = ['isometric']
    var index = Math.floor(Math.random() * arr.length);
    return arr[index];
}

function myMove() {
    id = setInterval(drawState, 6);
    
}


function drawState(){
    var h = window.innerHeight;
    var w = window.innerWidth;

    var viewGap = 500;

    var c = document.getElementById("animate");
    c.height = h;
    c.width = w;
    var ctx = c.getContext("2d");
    ctx.fillStyle = '#181818';
    ctx.beginPath();
    ctx.moveTo(0,0);
    ctx.lineTo(locOffset,0);
    ctx.lineTo(locOffset+h,h);
    ctx.lineTo(0,h);
    ctx.lineTo(0,0);

    ctx.moveTo(locOffset+viewGap,0);
    ctx.lineTo(locOffset+viewGap+h,h);
    ctx.lineTo(w,h);
    ctx.lineTo(w,0);
    ctx.fill();

    var d = document.getElementById("gradient");
    d.height = h;
    d.width = w;

    var ctx2 = d.getContext("2d")
    ctx2.beginPath();
    ctx2.moveTo(locOffset + 50,0);
    ctx2.lineTo(w + h + locOffset + 50, 0);
    ctx2.lineTo(w + h + locOffset +  50,w + h);
    var grd=ctx2.createLinearGradient(50 + locOffset + (w / 2),w/2, 150 + locOffset + (w / 2),(w/2)-100);
    grd.addColorStop(0,'rgba(0,0,0,0)');
    grd.addColorStop(1,'rgba(24,24,24,1)');
    ctx2.fillStyle=grd;
    ctx2.fill();

    locOffset -= 4;
    if (locOffset < (h * -1.4)){
        locOffset = w;
    }
}
</script>
</html>