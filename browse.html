<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta charset="utf-8">
<link rel="stylesheet" href="style.css">

<title>
Jamie Bali
</title>
</head>

<body style="background-color:#151515">
<div id="cover">
    <div id="coverTitle">
        Jamie's Project Blog
    </div>
    <div id="coverSubtitle">
        Ideas, Rambles, Projects, and More.    
    </div>
</div>

</body>

<script>
    let request = new XMLHttpRequest();
    request.open("GET", 'https://api.github.com/repos/JamieBali/JamieBali.github.io/contents/posts');
    request.send();
    request.onload = () =>{
        var data = (JSON.parse(request.response));
        data.reverse().forEach(createBlock);
    }

    function createBlock(item){
        let subreq = new XMLHttpRequest();
        subreq.open("GET", 'https://raw.githubusercontent.com/JamieBali/JamieBali.github.io/main/posts/' + item.name);
        subreq.send();
        subreq.onload = () =>{
            var splitText = subreq.response.split("|");
            console.log(splitText[0])
            var element = document.createElement("div");
            element.className = "linkBlock";

            var titleElement = document.createElement("div");
            titleElement.className = "blockTitle";
            titleElement.appendChild(document.createTextNode(splitText[0]));

            element.appendChild(titleElement);
            element.appendChild(document.createTextNode(splitText[2]));

            document.getElementById('cover').appendChild(element);
        }
    }

    
    

</script>
</html>